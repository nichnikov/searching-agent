import os
from dotenv import load_dotenv

# Загружаем переменные окружения из .env файла
load_dotenv()

# --- Настройки API и моделей ---
ACTION_USERNAME = os.getenv("ACTION_USERNAME")
ACTION_PASSWORD = os.getenv("ACTION_PASSWORD")
OPENAI_BASE_URL = os.getenv("OPENAI_BASE_URL")
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
SERPER_API_KEY = os.getenv("SERPER_API_KEY") # Добавляем ключ для Serper
LANGFUSE_PUBLIC_KEY=os.getenv("LANGFUSE_PUBLIC_KEY")
LANGFUSE_SECRET_KEY=os.getenv("LANGFUSE_SECRET_KEY")
LANGFUSE_HOST=os.getenv("LANGFUSE_HOST")

# --- Настройки по умолчанию для argparse ---

query = """
 Как оценить выручку с учетом скидок по ФСБУ 9/2025. Рассмотри варианты, если на момент отгрузки размер скидки известен и если размер можно будет определить только в будущем, например, в зависимости от объема закупок. Какие варианты расчета скидок предлагает ФСБУ 9/2025 и какие у них есть плюсы и минусы. Каким проводками отражать выручку за минусом скидки, саму скидку в момент предоставления и в момент перечисления денег в счет скидки. Что нужно прописать в учетной политике в части учета выручки с учетом скидок? кто может не применять эту норму и считать выручку без учета скидок.
2. Как оценить выручку с учетом отсрочек или рассрочек по ФСБУ 9/2025. Рассмотри варианты, если отсрочка или рассрочка больше 12 месяцев или меньше этого периода. По какой формуле дисконтировать выручку. Как выбрать коэффициент дисконтирования. Как учесть часть выручки, которая относится к процентам по дисконтированию. Приведите проводки в периоде получения выручки, ежемесячно до даты окончания отсрочки или рассрочки и на конец этого периода. Кто может отказаться от дисконтирования выручки при отсрочке или рассрочке? Что нужно прописать в учетной политике в этой части?
3. Как оценить выручку при неденежной форме оплаты по ФСБУ 9/2025. Какую стоимость брать для расчета? и каких активов: передаваемых или получаемых? Какими проводками отражать в учете? Что прописать в учетной политике?
"""

query_ = """
затраты в черной металлургии от производства чугуна до выпуска проката.
- порядок бухгалтерского учета движения полуфабрикатов собственного производства между цехами (переделами),
- порядок учета затрат на производство и калькулирования себестоимости полуфабрикатов собственного производства,
- порядок отражения полуфабрикатов собственного производства в калькуляции при их производстве и дальнейшем использовании в производстве следующего передела.

особенности учета: 
- налогового, 
- бухгалтерского

другие важные моменты:
- нормативы расхода материалов на единицу продукции, если они есть
- бухгалтерские проводки
- влияние на себестоимость продукции (прямые и косвенные затраты)
- влияние на цену продукции
"""


DEFAULT_MODEL = "google/gemini-2.5-pro"
MODEL_CONTEXT_WINDOW = 1000000 
CONTENT_TOKEN_THRESHOLD = 10000 
MAX_TOKENS_FINAL_ANSWER = 25000
DEFAULT_QUERY = (query)
DEFAULT_SECTIONS = "law,recommendations"
DEFAULT_LIMIT = 5
MAX_RETRIES = 1

# --- Настройки для Yandex Search API ---
YANDEX_FOLDER_ID = os.getenv("YANDEX_FOLDER_ID")
YANDEX_OAUTH_TOKEN = os.getenv("YANDEX_OAUTH_TOKEN")
DATA_DIR = "data"

# Проверка наличия обязательных переменных окружения
if not all([ACTION_USERNAME, ACTION_PASSWORD, OPENAI_API_KEY, SERPER_API_KEY]):
    raise ValueError(
        "Необходимо задать все обязательные переменные окружения в файле .env: "
        "ACTION_USERNAME, ACTION_PASSWORD, OPENAI_API_KEY, SERPER_API_KEY"
    )